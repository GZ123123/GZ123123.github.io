document.addEventListener("DOMContentLoaded",function(){let e="Matakunkun";Object.defineProperty(window,"name",{get:()=>e,set:t=>e=t.toString()});const t=document.querySelector(".modal-container");fetch("../song/santa-tell-me/lyric.lrc").then(e=>e.text()).then(e=>this.lr=new Lyricer(document.querySelector("audio"),e)),window.addEventListener("click",e=>{e.target==t&&(document.querySelector("body").classList.remove("modal-showed"),t.classList.remove("show"),function(){const e=document.querySelector("#modal-container");e.querySelector(".modal").classList.value="modal",e.querySelector(".container").innerHTML=""}())}),document.querySelectorAll("[data-toggle='modal']").forEach(o=>o.addEventListener("click",o=>{const a=o.target.dataset.toggle?o.target:o.target.closest("[data-toggle='modal']"),{target:r}=a.dataset;!function(t){const o=document.querySelector(t),a=document.querySelector("#modal-container"),{class:r,ltr:n}=o.dataset,c=o.content.cloneNode("true").querySelector("fragment").innerHTML;r.split(" ").forEach(e=>a.querySelector(".modal").classList.add(e)),a.querySelector(".container").innerHTML=c.replace("%name%",e)}(`#${r}`),document.querySelector("body").classList.add("modal-showed"),t.classList.add("show")})),document.querySelectorAll(".gift-item").forEach(e=>e.addEventListener("click",e=>{const t=e.target.closest(".gift-item"),o=t.id.split("-").pop();t.classList.contains("active")||(t.classList.add("active"),gifts.push(o),localStorage.setItem("gifts",gifts.join(",")))})),document.querySelector("audio").addEventListener("song-duration",e=>{document.querySelector(".duration").style=`--duration: ${e.detail.percent}%`}),document.querySelector("audio").addEventListener("lyric-update",e=>lyricer.innerHTML=e.detail.lyric),document.querySelector(".duration").addEventListener("click",e=>{const t=e.target.getBoundingClientRect();var o=e.clientX-t.left;this.lr.move(o/t.width)}),document.querySelectorAll(".icon").forEach(e=>e.addEventListener("click",e=>{e.target.classList.contains("play")?(e.target.classList.toggle("play"),e.target.classList.toggle("pause"),this.lr.play()):e.target.classList.contains("pause")&&(e.target.classList.toggle("play"),e.target.classList.toggle("pause"),this.lr.pause())})),document.querySelector("input[name='name']").addEventListener("keydown",t=>{13==t.keyCode&&t.target.value.trim()&&(e=t.target.value,document.querySelector("body").classList.value="",document.querySelector("#name-modal").remove())})});